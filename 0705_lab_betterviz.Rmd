# LAB: Better Viz {#lab07}


```{r lab_betterviz-setup, include = FALSE}
source("common.R")
ds4p_funyoutube <- read.csv("metadata/ds4p_funyoutube.csv", sep = "")
ds4p_urls <- read.csv("./metadata/ds4p_urls.csv")
```

## Conveying the right message through visualization {.unnumbered}

In this lab, our goal is to reconstruct and improve a data visualization concerning COVID-19 and mask-wearing practices. We aim to explore how data visualizations can sometimes mislead and learn techniques to correct these misrepresentations. 

## Learning Goals {.unnumbered}

- Critiquing visualizations that misrepresent data
- Exploring and understanding datasets for visual analysis
- Applying principles of effective data visualizations to improve clarity and accuracy

## Getting started {.unnumbered}

Go to the course GitHub organization and locate the [template](https://github.com/DataScience4Psych/lab_07_betterviz). Clone and then open the R Markdown document.  Ensure it compiles without errors to confirm your setup is correct.

### Warm up {.unnumbered}

Let's warm up with some simple exercises.
Update the YAML of your R Markdown file with your information, knit, commit, and push your changes.
Make sure to commit with a meaningful commit message.
Then, go to your repo on GitHub and confirm that your changes are visible in your Rmd **and** md files.
If anything is missing, commit and push again.

### Packages {.unnumbered}

We'll use the **tidyverse** package for much of the data wrangling and visualization.
This package is already installed for you.
You can load it by running the following in your Console:

```{r load-packages, message = FALSE}
library(tidyverse)
library(scales)
```

### Data {.unnumbered}

The visualization in this lab comes from a KDHE press conference on August 5, 2020. It compares 
COVID-19 case rates in Kansas counties with and without mask mandates. Since the original data was not released, the dataset used in this lab, `kansas_grouped_rolling_avg.csv`, was reconstructed from the publicly available data on  [USAFacts](https://usafacts.org/visualizations/coronavirus-covid-19-spread-map/).


## Exercises {.unnumbered}

The following visualization was shared [on Twitter](https://twitter.com/JonBoeckenstedt/status/1291602888376999936) as "extraordinary misleading".

```{r lab_betterviz-include-screenshot, echo=FALSE}
try_include_tweet("https://twitter.com/JonBoeckenstedt/status/1291602888376999936")
```

```{r fig.fullwidth = TRUE, echo = FALSE,message = FALSE}
knitr::include_graphics("img/masks-v-nomasks.png")


offset <- 11
df <- read_csv("data/kansas_grouped_rolling_avg.csv") %>%
  mutate(date = as.Date(date) + .5, # add 12 hours to make the date labels more accurate
    mask_mandate = ifelse(mask_mandate == "Mask", "Mask Counties", "No-Mask Mandate Counties") %>%
           factor(levels = c("Mask Counties", "No-Mask Mandate Counties")),
           rolling_avg = case_when(
           mask_mandate == "No-Mask Mandate Counties" ~ rolling_avg + offset,
           TRUE ~ rolling_avg
         ))
```

<details>
  <summary>Here's a close attempt at reconstructing the original plot. Can you spot the differences?</summary>
```{r fig.fullwidth = TRUE, echo = FALSE,message = FALSE}
left_breaks  <- seq(15, 25, by = 2)
right_breaks <- seq(4, 14, by = 2)       
col_mask <- "#F28E2B"
col_nomask <- "#4E79A7"         
date_lo <- as.Date("2020-07-12")
date_hi <- as.Date("2020-08-03")
df %>% 
  ggplot(
    aes(x = date,
        y = rolling_avg,
        color = mask_mandate,
        group = mask_mandate
        )
  ) +
  geom_line(linewidth = 1,aes(group = mask_mandate)) +

    scale_color_manual(values = c("Mask Counties" = col_mask,
                                "No-Mask Mandate Counties" = col_nomask)) +
  scale_x_date(
    limits = c(date_lo-.5, date_hi+1),
    breaks  = seq(date_lo+.5, date_hi+.5, by = "1 day"),
    date_labels = "%m/%d/%Y",
    expand = expansion(mult = c(0, 0))
  ) +
    scale_y_continuous(
    name = NULL,
    breaks = left_breaks,
    labels = label_number(accuracy = 1),
    limits = c(15, 25),
    expand = expansion(mult = c(0, 0)),
    sec.axis = sec_axis(~ . - offset, name = NULL,
                        labels = label_number(accuracy = 1),
                         breaks = right_breaks,
                         )
  ) +
  labs(
    title = "Kansas COVID-19 7-Day Rolling Average of Daily Cases/Per 100K Population",
    subtitle = 
      bquote(atop('Mask Counties Vs. No-Mask Mandate Counties' , scriptstyle('Source: Kansas Department of Health and Environment'))),
    x = NULL,
    y = NULL,
    color = NULL
  ) +
  coord_cartesian(ylim = c(15, 25.5),clip = "off") +
  theme_minimal() +
  theme(legend.position = "none",
    axis.text.x = element_text(angle = 45, hjust = 1, size = 6),
    legend.title = element_blank(),
     plot.title = element_text(hjust = -0.5),
     plot.subtitle = element_text(hjust = .5, size = 8),
     panel.grid.minor = element_blank(),
     axis.line = element_line(color= col_mix("black", "white", 0.80),
                              linewidth = 0.5)
  ) + 
   annotate("text", x = date_lo+.5, y = Inf, label = "Mask",
           color = col_mask, vjust = -0.05, hjust = 2.05, size = 2.5) +
  annotate("text", x = date_hi-.5, y = Inf, label = "No Mask",
           color = col_nomask, vjust = -0.05, hjust = -.45, size = 2.5)


```
</details>

Before you dive in, think about what is misleading about this visualization and how you might go about fixing it.

1. Check the lab repository, you'll find a CSV file called `kansas_grouped_rolling_avg.csv`. Load it using:
```r
    df <- read_csv("kansas_grouped_rolling_avg.csv")
```

Explore its structure and use it to re-construct the misleading visualization. 

Note: Since the original dataset for this plot was not publicly available, a former student did some impressive detective work to reconstruct it from other publicly available datasets. The re-constructed plot may still differ slightly from the original. If you're interested in how the data was obtained and processed, you can refer to [this repository](https://github.com/HollandSun/Reproduce_Lab7plot.git) for the full data pipeline and sources.

2. Make a visualization that more accurately (and honestly) reflects the data and conveys a clear message.

3. What message is more clear in your visualization than it was in the original visualization?

4. What, if any, useful information do these data and your visualization tell us about mask wearing and COVID?
    It'll be difficult to set aside what you already know about mask wearing, but you should try to focus only on what this visualization tells.
    Feel free to also comment on whether that lines up with what you know about mask wearing.

Using the same dataset you constructed, your goal now is to create a new visualization that intentionally conveys the opposite message of your previous, accurate visualization. This exercise is designed to highlight the impact of visualization choices on the interpretation of data. It's a practical exploration of how changing the presentation can alter the perceived message, underscoring the ethical implications of data visualization.

5. Reflect on the message conveyed by your accurate visualization regarding mask-wearing and COVID-19. Discuss the key factors that contribute to this message, such as the variables used, the scale of the axes, and the type of visualization.

6. Plan Your Opposite Visualization: Briefly determine what opposite message you want to covey. Consider the data you have available (or could easily add).

7. Use visualization techniques to craft a chart or graph that conveys this contrary perspective. Pay careful attention to how different visualization choices, like altering the y-axis scale or changing the chart type, can influence the message received by the audience.

8. Now for the real challenge! Find your own misleading graph and try to reconstruct it. You can find misleading graphs in news articles, social media, or even academic papers. Analyze the graph to identify what makes it misleading and then attempt to recreate it using the same data (if available) or similar data. This exercise will help you understand the techniques used to mislead and how to critically evaluate visualizations.


ðŸ§¶ âœ… â¬†ï¸ Knit, *commit, and push your changes to GitHub with an appropriate commit message. Make sure to commit and push all changed files so that your Git pane is cleared up afterwards and review the md document on GitHub to make sure you're happy with the final state of your work.*

```{r courselinks, child="includes/courselinks.md"}
```
